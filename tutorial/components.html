<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>消息组件 | Mirai Framework for Python</title>
    <meta name="description" content="a framework for mirai, a powerful headless qq(oicq) client.">
    <meta name="generator" content="VuePress 1.3.1">
    
    
    <link rel="preload" href="/assets/css/0.styles.d3758638.css" as="style"><link rel="preload" href="/assets/js/app.f1bb486b.js" as="script"><link rel="preload" href="/assets/js/3.1bcf0993.js" as="script"><link rel="preload" href="/assets/js/2.1dc6bf21.js" as="script"><link rel="preload" href="/assets/js/13.a09efc54.js" as="script"><link rel="preload" href="/assets/js/5.8a4a1f01.js" as="script"><link rel="preload" href="/assets/js/4.40b68384.js" as="script"><link rel="prefetch" href="/assets/js/10.aa836a19.js"><link rel="prefetch" href="/assets/js/11.aaa04a9e.js"><link rel="prefetch" href="/assets/js/12.ee87f60c.js"><link rel="prefetch" href="/assets/js/14.c20c6816.js"><link rel="prefetch" href="/assets/js/15.443433a7.js"><link rel="prefetch" href="/assets/js/16.fee5dd29.js"><link rel="prefetch" href="/assets/js/17.294116d1.js"><link rel="prefetch" href="/assets/js/18.f4ddcbcd.js"><link rel="prefetch" href="/assets/js/19.80f973ab.js"><link rel="prefetch" href="/assets/js/20.eca3089c.js"><link rel="prefetch" href="/assets/js/21.5c99d2f1.js"><link rel="prefetch" href="/assets/js/22.fc6ccf65.js"><link rel="prefetch" href="/assets/js/23.29202546.js"><link rel="prefetch" href="/assets/js/6.bcedf4a6.js"><link rel="prefetch" href="/assets/js/7.6647d374.js"><link rel="prefetch" href="/assets/js/8.74387a51.js"><link rel="prefetch" href="/assets/js/9.6d9944ff.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d3758638.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Mirai Framework for Python</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/NatriumLab/python-mirai" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/mamoe/mirai" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mirai
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://pypi.org/project/kuriyama" target="_blank" rel="noopener noreferrer" class="nav-link external">
  PyPI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/NatriumLab/python-mirai" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/mamoe/mirai" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mirai
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://pypi.org/project/kuriyama" target="_blank" rel="noopener noreferrer" class="nav-link external">
  PyPI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/hello-mirai.html" class="sidebar-link">向 Mirai 道个好</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>教程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>搭建开发环境</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mirai/use-console.html" class="sidebar-link">使用 mirai-console</a></li></ul></section></li><li><a href="/tutorial/hello-world.html" class="sidebar-link">Hello, world!</a></li><li><a href="/tutorial/components.html" class="active sidebar-link">认识消息组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tutorial/components.html#嗯-什么是消息组件-message-components" class="sidebar-link">嗯...什么是消息组件(Message Components)?</a></li><li class="sidebar-sub-header"><a href="/tutorial/components.html#为什么会这样" class="sidebar-link">为什么会这样?</a></li><li class="sidebar-sub-header"><a href="/tutorial/components.html#我可以从哪里找到消息组件" class="sidebar-link">我可以从哪里找到消息组件?</a></li><li class="sidebar-sub-header"><a href="/tutorial/components.html#基本的使用方式" class="sidebar-link">基本的使用方式</a></li><li class="sidebar-sub-header"><a href="/tutorial/components.html#图片的发送方式" class="sidebar-link">图片的发送方式</a></li><li class="sidebar-sub-header"><a href="/tutorial/components.html#qq-表情的发送方式" class="sidebar-link">QQ 表情的发送方式</a></li></ul></li><li><a href="/tutorial/annotations.html" class="sidebar-link">类型注解(Annotations)</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>事件</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/tutorial/exception.html" class="sidebar-link">错误处理</a></li><li><a href="/tutorial/application/see-application-again.html" class="sidebar-link">又见 Application</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>依赖注入</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/tutorial/subroutine.html" class="sidebar-link">协处理器</a></li><li><a href="/tutorial/middleware.html" class="sidebar-link">中间件</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="消息组件"><a href="#消息组件" class="header-anchor">#</a> 消息组件</h1> <p></p><div class="table-of-contents"><ul><li><a href="#嗯-什么是消息组件-message-components">嗯...什么是消息组件(Message Components)?</a></li><li><a href="#为什么会这样">为什么会这样?</a><ul><li><a href="#嗯-所以为什么不是-mirai码">嗯...所以为什么不是 &quot;Mirai码&quot; ?</a></li></ul></li><li><a href="#我可以从哪里找到消息组件">我可以从哪里找到消息组件?</a></li><li><a href="#基本的使用方式">基本的使用方式</a></li><li><a href="#图片的发送方式">图片的发送方式</a></li><li><a href="#qq-表情的发送方式">QQ 表情的发送方式</a></li></ul></div><p></p> <h2 id="嗯-什么是消息组件-message-components"><a href="#嗯-什么是消息组件-message-components" class="header-anchor">#</a> 嗯...什么是消息组件(Message Components)?</h2> <p>回到一开始的 <code>Hello, world</code> 实例中去, 我们会发现, 当我们发送消息时, 需要使用这样一个格式:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> mirai <span class="token keyword">import</span> Plain

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token keyword">await</span> session<span class="token punctuation">.</span>sendGroupMessage<span class="token punctuation">(</span>
    group<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>Plain<span class="token punctuation">(</span>text<span class="token operator">=</span><span class="token string">&quot;Hello, world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>注意第三行, 我们使用一个字符串 <code>&quot;Hello, world!&quot;</code> 作为具名实参 <code>text</code> 传入到了 <code>Plain</code> 中,
并实例化了一个 <code>List[Plain]</code> 对象.<br>
而当我们发出任意私聊消息时, 机器人会发出 <code>&quot;Hello, world!&quot;</code> 的消息.<br>
如果我们将其改为这样:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token punctuation">[</span>Plain<span class="token punctuation">(</span>text<span class="token operator">=</span><span class="token string">&quot;Hello, &quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Plain<span class="token punctuation">(</span>text<span class="token operator">=</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Plain<span class="token punctuation">(</span>text<span class="token operator">=</span><span class="token string">&quot;!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>若此时, 我们也如之前一样发出任意私聊消息时:</p> <div class="panel-view"><div class="controls"><div class="circle red"></div> <div class="circle yellow"></div> <div class="circle green"></div> <div class="title">聊天记录</div></div> <div class="content"><div class="chat-message"><div class="avatar" style="background-color:#cc0066;">A</div> <div class="nickname">Alice</div> <div class="message-box">随便打个招呼吧.</div></div> <div class="chat-message"><img src="/mirai-head.png" class="avatar"> <div class="nickname">Bot</div> <div class="message-box">Hello, world!</div></div></div></div> <p>我们会发现, 这和之前是一样的返回.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>我们会尽量使用浅显易懂的方法, 来解释一些读者可能会抛出的问题.<br>
若你对我们的方法表示困惑, 欢迎提出 Issue 或是发起 Pull Request.<br>
我们始终欢迎任何形式的贡献.</p></div> <h2 id="为什么会这样"><a href="#为什么会这样" class="header-anchor">#</a> 为什么会这样?</h2> <p>我们将类似 <code>Plain</code> 这样可以构成一条消息的一部分的模型, 称为 <code>消息组件(Message Components)</code>.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>你目前所接触的仅仅是冰山一角, 你还可以通过 查看代码 或是 实地演练 的方式对你刚才接触到的东西进行更为深层次的了解.<br>
没有不好用的工具, 只有不会用的工匠.</p></div> <p>你发出的消息在 <code>mirai</code> 内部会被解析为一个或多个部分,
并且每个部分都有其特殊的用途, 像是 <code>@Alice</code>, <code>@全体成员</code>, 或是
<code>[这里是一张图片,不是什么色图,只是一张图]</code>, 这样, <code>mirai</code> 接收到消息, 并将消息序列化为这样的格式.</p> <h3 id="嗯-所以为什么不是-mirai码"><a href="#嗯-所以为什么不是-mirai码" class="header-anchor">#</a> 嗯...所以为什么不是 &quot;Mirai码&quot; ?</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>如果你之前曾使用过类似 <a href="https://cqp.me" target="_blank" rel="noopener noreferrer">酷Q<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 这样的无头客户端实现,
你可能会更加熟悉于类似 <code>CQ码</code> 的格式.<br>
我们将解释这个问题, 并说明我们的用意.</p></div> <p>我们<strong>不会</strong>创造什么 <code>Mirai码</code>, 过去没有, 现在没有, 将来也<strong>不会</strong>有.<br>
出于方便和可用性考虑, 我们并不会去专门设计自己的表现特殊数据的方式,
相反, 我们使用类似 <a href="https://json-schema.org/" target="_blank" rel="noopener noreferrer"><code>JSON Schema</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的方式表现数据.</p> <p>而这种方式对应用的表达性是有很大提高的:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 你觉得那种方式更加友好?</span>
string <span class="token operator">=</span> <span class="token string">&quot;[At::target=123456789] [Image::\{UIUIUIUIUIUI-UIUI-UIUI-UIUI\}.jpg]&quot;</span>

objective <span class="token operator">=</span> <span class="token punctuation">[</span>
    At<span class="token punctuation">(</span>target<span class="token operator">=</span><span class="token number">123456789</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Image<span class="token punctuation">(</span>imageId<span class="token operator">=</span>UUID<span class="token punctuation">(</span><span class="token string">&quot;UIUIUIUIUIUI-UIUI-UIUI-UIUI&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>其实我们还是创造了一种将消息组件转化为文本信息的API,
但是这种转换是<strong>单向</strong>的.</p> <p>你可以使用 <code>MessageChain.toString</code> 方法将消息链用文本形式表示,
同时我们也在各个组件内定义了 <code>toString</code> 方法, 用于一些判断.</p></div> <h2 id="我可以从哪里找到消息组件"><a href="#我可以从哪里找到消息组件" class="header-anchor">#</a> 我可以从哪里找到消息组件?</h2> <p>若你只使用 <code>python-mirai</code>, 那么你可以在 <code>mirai.event.message.components</code> 处找到所有消息组件的定义.</p> <details class="custom-block details"><summary>DETAILS</summary> <p>我们支持的可发出的消息组件:</p> <ul><li><code>At</code>(<code>mirai.event.message.components.At</code>): At某人
<ul><li><code>target: int</code> <ul><li>你要 at 的人</li></ul></li></ul></li> <li><code>AtAll</code>(<code>mirai.event.message.components.AtAll</code>): At全体成员, 若你的机器人无相关权限, 抛出 <code>ValueError</code>.</li> <li><code>Plain</code>(<code>mirai.event.event.message.components.AtAll</code>): 文本消息.
<ul><li><code>text: str</code> <ul><li>将被发出的文本, 支持所有使用 <code>Unicode</code> 的字符串.</li></ul></li></ul></li> <li><code>Image</code>(<code>mirai.event.message.components.Image</code>): 图片, 有着特殊的使用方式, 将在之后重点讲到.</li> <li><code>Face</code>(<code>mirai.event.message.components.Face</code>): QQ表情, 有着特殊的使用方式, 将在之后重点讲到.
<ul><li><code>faceId: int</code> <ul><li>表情的 ID, 会在之后讲到如何传值.</li></ul></li></ul></li></ul></details> <h2 id="基本的使用方式"><a href="#基本的使用方式" class="header-anchor">#</a> 基本的使用方式</h2> <p>只需要实例化即可, 在最新的提交中已经重写了 <code>__init__</code> 方法, 这意味着你会得到更好的开发体验:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> mirai <span class="token keyword">import</span> At<span class="token punctuation">,</span> AtAll<span class="token punctuation">,</span> Plain

At<span class="token punctuation">(</span>target<span class="token operator">=</span><span class="token number">123456789</span><span class="token punctuation">)</span>
AtAll<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 需要有特定权限.</span>
Plain<span class="token punctuation">(</span>text<span class="token operator">=</span><span class="token string">&quot;?&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在发送消息时, 我们推荐使用列表的形式组合消息组件:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> mirai <span class="token keyword">import</span> At<span class="token punctuation">,</span> Plain

<span class="token keyword">await</span> app<span class="token punctuation">.</span>sendGroupMessage<span class="token punctuation">(</span>
    sender<span class="token punctuation">.</span>group<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>
        At<span class="token punctuation">(</span>target<span class="token operator">=</span>sender<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        Plain<span class="token punctuation">(</span>text<span class="token operator">=</span><span class="token string">&quot;!&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="图片的发送方式"><a href="#图片的发送方式" class="header-anchor">#</a> 图片的发送方式</h2> <p>我们强烈建议你使用 <code>Image.fromFileSystem</code> 工厂方法来上传本地图片:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> mirai <span class="token keyword">import</span> Image<span class="token punctuation">,</span> Plain

<span class="token punctuation">[</span>
    Image<span class="token punctuation">.</span>fromFileSystem<span class="token punctuation">(</span><span class="token string">&quot;./image.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Plain<span class="token punctuation">(</span>text<span class="token operator">=</span><span class="token string">&quot;这张图片发给你了!&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>此外, 你可以直接使用 <code>MessageChain</code> 对象的
<code>getFirstComponent</code> 方法获取消息中的第一张图片, 也可以使用
<code>getAllofComponent</code> 方法获取消息中的所有图片:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> typing <span class="token keyword">import</span> List
<span class="token keyword">from</span> mirai <span class="token keyword">import</span> MessageChain<span class="token punctuation">,</span> Image

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">event_gm</span><span class="token punctuation">(</span>msg<span class="token punctuation">:</span> MessageChain<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 获取消息中的第一张图片</span>
    a_image<span class="token punctuation">:</span> Image <span class="token operator">=</span> msg<span class="token punctuation">.</span>getFirstComponent<span class="token punctuation">(</span>Image<span class="token punctuation">)</span>

    <span class="token comment"># 获取消息中所有图片</span>
    all_images<span class="token punctuation">:</span> List<span class="token punctuation">[</span>Image<span class="token punctuation">]</span> <span class="token operator">=</span> \
        msg<span class="token punctuation">.</span>getAllofComponent<span class="token punctuation">(</span>Image<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>你可以直接发送其中的 <code>Image</code> 对象, 大多数情况都会如预期中运转.</p> <h2 id="qq-表情的发送方式"><a href="#qq-表情的发送方式" class="header-anchor">#</a> QQ 表情的发送方式</h2> <p>我们内置了一个 <code>QQFaces</code>(<code>mirai.face.QQFaces</code>) 的字典, 你可以直接从中获取 <code>faceId</code>:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> mirai<span class="token punctuation">.</span>face <span class="token keyword">import</span> QQFaces

<span class="token keyword">from</span> mirai <span class="token keyword">import</span> Face
Face<span class="token punctuation">(</span>faceId<span class="token operator">=</span>QQFaces<span class="token punctuation">[</span><span class="token string">'nanguo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># 实例化了一个会被发送为 &quot;难过&quot; 的表情.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/tutorial/hello-world.html" class="prev">
        Hello, world!
      </a></span> <span class="next"><a href="/tutorial/annotations.html">
        类型注解(Annotations)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f1bb486b.js" defer></script><script src="/assets/js/3.1bcf0993.js" defer></script><script src="/assets/js/2.1dc6bf21.js" defer></script><script src="/assets/js/13.a09efc54.js" defer></script><script src="/assets/js/5.8a4a1f01.js" defer></script><script src="/assets/js/4.40b68384.js" defer></script>
  </body>
</html>
